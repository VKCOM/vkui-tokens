# Руководство по сопровождению vkui-tokens

Данный документ содержит базовую информацию по сопровождению и процессам разработки и будет полезен в первую очередь
сопровождающим (maintainers) репозитория **vkui-tokens**. Информацию о правилах работы с кодом можно найти в
[требованиях к разработке](CONTRIBUTING.md).

**Содержание**

- [Руководство по сопровождению vkui-tokens](#руководство-по-сопровождению-vkui-tokens)
  - [Подготовка и выпуск релизов](#подготовка-и-выпуск-релизов)

## Подготовка и выпуск релизов

Для выпуска версии библиотеки vkui-tokens необходимо придерживаться следующего чек-листа:

- [ ] Создан [`Release notes`](https://github.com/VKCOM/VKUI/releases) с названием планируемого релиза (например, `v4.70.0`), в котором описаны все задачи, включённые в данный релиз.
- [ ] Дополнительно проверить коммиты в публикуемой ветке, чтобы убедиться, что все задачи попали в `Release notes`.

Для непосредственного запуска релизов или пререлизов (`alpha`/`beta`-версии) используются GitHub Actions. Запуск осуществляется
со [страницы релиза](https://github.com/VKCOM/vkui-tokens/actions/workflows/publish.yml).
Выпуск пререлиза обычно не подразумевает наличие `Release Notes`, поэтому не забудьте снять галочку "publish release notes" (если забыли — ничего страшного, последний шаг публикации релиза просто завершится с ошибкой, это не повлияет на публикацию пакета в `npm`).

Описание всех полей формы запуска релиза:

- **Use workflow from**: выбираем базовую ветку, из которой будет запущен релиз. Для выпуска **vkui-tokens** минорных версий
  это будет `master`, если вы хотите выпустить патч — создайте ветку от текущей `master`-ветки, например, `4.70-stable` (если текущая минорная версия v4.70.0).

- **version type**: выбираем тип релиза — патч, минор или мажор. Обычно для **vkui-tokens** выпуск из `master`-ветки соответствует изменениям `minor`.

- **use syntax x.y.z...**: данное поле может быть полезно, если вам необходимо выпустить кастомную версию, которая не
  подчиняется релизному циклу (например, вы можете выпустить пререлизную версию или `dev`-версию, указав её в данном поле).

- **npm tag**: здесь можно выбрать, под каким тэгом появится пакет в `npm`-репозитории. Обычные минорные версии публикуются с тэгом `latest`, поэтому он выбран по умолчанию. Если вы публикуете пререлиз, то указывайте соответствующий тэг (`beta`/`rc`). Если вы хотите, чтобы у версии не было тэга — выбирайте `none`.

- **publish release notes**: автоматически публикует `Release Notes` после релиза версии. Не забывайте снимать галочку для релизов без `Release Notes`.
